module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},70844,a=>{a.n(a.i(92359))},39656,a=>{"use strict";let b={ctrPercent:2,conversionPercent:3,avgOrderValue:45};function c(a,d=b){let{ctrPercent:e,conversionPercent:f,avgOrderValue:g}=d;return Math.round(e/100*a*(f/100)*g*100)/100}function d(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function e(a){return a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString()}a.s(["DEFAULT_SETTINGS",0,b,"calculateEstimatedLoss",()=>c,"formatCurrency",()=>d,"formatNumber",()=>e])},36350,a=>{"use strict";var b=a.i(39656);function c(a,d=b.DEFAULT_SETTINGS){return[...a.filter(a=>"NOT_FOUND"===a.status||"OOS"===a.status).map(a=>(function(a,c=b.DEFAULT_SETTINGS){return{id:a.id,videoId:a.video.id,videoTitle:a.video.title,videoViewCount:a.video.viewCount,url:a.originalUrl,status:a.status,merchant:a.merchant,lastCheckedAt:a.lastCheckedAt,estimatedLoss:(0,b.calculateEstimatedLoss)(a.video.viewCount,c)}})(a,d))].sort((a,b)=>{if(a.estimatedLoss!==b.estimatedLoss)return b.estimatedLoss-a.estimatedLoss;if(a.videoViewCount!==b.videoViewCount)return b.videoViewCount-a.videoViewCount;let c={NOT_FOUND:3,OOS:2,UNKNOWN:1,REDIRECT:0,OK:-1};return c[b.status]-c[a.status]})}a.s(["getAllIssues",()=>c])},75557,a=>a.a(async(b,c)=>{try{var d=a.i(7997),e=a.i(20971),f=a.i(9307),g=a.i(61469),h=a.i(36350),i=a.i(39656),j=a.i(95936),k=b([f,g]);async function l(){let a=await (0,e.getServerSession)(f.authOptions);if(!a?.user?.id)return null;let b=await g.prisma.user.findUnique({where:{id:a.user.id},select:{ctrPercent:!0,conversionPercent:!0,avgOrderValue:!0}}),c={ctrPercent:b?.ctrPercent??2,conversionPercent:b?.conversionPercent??3,avgOrderValue:b?.avgOrderValue??45},k=await g.prisma.affiliateLink.findMany({where:{video:{userId:a.user.id}},select:{id:!0,originalUrl:!0,status:!0,merchant:!0,lastCheckedAt:!0,video:{select:{id:!0,title:!0,viewCount:!0}}}}),l=(0,h.getAllIssues)(k,c),m=l.reduce((a,b)=>a+b.estimatedLoss,0);return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)("div",{className:"flex justify-between items-center",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Issues"}),(0,d.jsxs)("p",{className:"text-gray-600",children:[l.length," broken or out-of-stock links â€¢ ",(0,i.formatCurrency)(m)," estimated loss"]})]})}),(0,d.jsx)("div",{className:"bg-white rounded-lg border",children:0===l.length?(0,d.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,d.jsx)("p",{className:"mb-2",children:"No issues found!"}),(0,d.jsx)("p",{className:"text-sm",children:"All your affiliate links are working properly."})]}):(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Video"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Link"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Checked"}),(0,d.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Est. Loss"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map(a=>(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{className:"px-6 py-4",children:[(0,d.jsx)(j.default,{href:`/videos/${a.videoId}`,className:"text-sm text-gray-900 hover:text-blue-600",children:a.videoTitle.length>40?a.videoTitle.slice(0,40)+"...":a.videoTitle}),(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,i.formatNumber)(a.videoViewCount)," views"]})]}),(0,d.jsxs)("td",{className:"px-6 py-4",children:[(0,d.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate block max-w-xs",title:a.url,children:a.url.length>50?a.url.slice(0,50)+"...":a.url}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:a.merchant})]}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${"NOT_FOUND"===a.status?"bg-red-100 text-red-700":"OOS"===a.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:"NOT_FOUND"===a.status?"Broken":"OOS"===a.status?"Out of Stock":a.status})}),(0,d.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:a.lastCheckedAt?new Date(a.lastCheckedAt).toLocaleDateString():"Never"}),(0,d.jsx)("td",{className:"px-6 py-4 text-right",children:(0,d.jsx)("span",{className:"text-sm font-medium text-red-600",children:(0,i.formatCurrency)(a.estimatedLoss)})})]},a.id))})]})})]})}[f,g]=k.then?(await k)():k,a.s(["default",()=>l]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__98ebf7ad._.js.map